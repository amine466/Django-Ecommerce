<!-- Humberger Begin -->
<div class="humberger__menu__overlay"></div>
<div class="humberger__menu__wrapper">
    <div class="humberger__menu__logo">
        <a href="{% url "Index" %}"><img src="{{ settings.logo.url }}" alt="Logo"></a>
    </div>
    <div class="humberger__menu__widget">
        <div class="header__top__right">
            <div class="header__top__right__social">
                <a href="{{ settings.facebook }}"><i class="fa fa-facebook"></i></a>
                <a href="{{ settings.twitter }}"><i class="fa fa-twitter"></i></a>
                <a href="{{ settings.linkedin }}"><i class="fa fa-linkedin"></i></a>
                <a href="{{ settings.pintrest }}"><i class="fa fa-pinterest-p"></i></a>
            </div>
            <div class="header__top__right__auth">
                {% if 'customer_id' in request.session %}
                <div class="dropdown" style="position: relative; cursor: pointer;">
                    <button class="btn dropdown-toggle" type="button" id="dropdownMenuButton" data-bs-toggle="dropdown" aria-expanded="false">
                        <i class="fa fa-user"></i>
                        <span>{{ customer }}</span>
                    </button>
                    <ul class="dropdown-menu" aria-labelledby="dropdownMenuButton" style="min-width: 100%;">
                        <li><a class="dropdown-item" href="{% url 'Profile' %}">Profile</a></li>
                        <li><a class="dropdown-item" href="{% url 'Orders' %}">Orders</a></li>
                        <li><a class="dropdown-item" href="#" onclick="document.getElementById('logout-form').submit(); return false;">Sign out</a></li>
                    </ul>
                </div>
                <form id="logout-form" action="{% url 'Logout' %}" method="post" style="display: none;">
                    {% csrf_token %}
                </form>
                {% else %}
                <a href="{% url 'Login' %}"><i class="fa fa-user"></i> Login</a>
                {% endif %}
            </div>
        </div>
    </div>
    <nav class="humberger__menu__nav mobile-menu">
        <ul>
            <li class="{% if request.resolver_match.url_name == 'Index' %}active{% endif %}"><a href="{% url "Index" %}">Home</a></li>
            <li class="{% if request.resolver_match.url_name == 'Shop' %}active{% endif %}"><a href="{% url "Shop" %}">Shop</a></li>
            <li class="{% if request.resolver_match.url_name == 'Contact' %}active{% endif %}"><a href="{% url "Contact" %}">Contact</a></li>
        </ul>
    </nav>
    <div id="mobile-menu-wrap"></div>
    <div class="header__top__right__social">
        <a href="{{ settings.facebook }}"><i class="fa fa-facebook"></i></a>
        <a href="{{ settings.twitter }}"><i class="fa fa-twitter"></i></a>
        <a href="{{ settings.linkedin }}"><i class="fa fa-linkedin"></i></a>
        <a href="{{ settings.pintrest }}"><i class="fa fa-pinterest-p"></i></a>
    </div>
    <div class="humberger__menu__contact">
        <ul>
            <li><i class="fa fa-envelope"></i>{{ settings.email }}</li>
        </ul>
    </div>
</div>
<!-- Humberger End -->

<!-- Header Section Begin -->
<header class="header">
    <div class="header__top">
        <div class="container">
            <div class="row">
                <div class="col-lg-6 col-md-6">
                    <div class="header__top__left">
                        <ul>
                            <li><i class="fa fa-envelope"></i>{{ settings.email }}</li>
                        </ul>
                    </div>
                </div>
                <div class="col-lg-6 col-md-6">
                    <div class="header__top__right">
                        <div class="header__top__right__social">
                            <a href="{{ settings.facebook }}"><i class="fa fa-facebook"></i></a>
                            <a href="{{ settings.twitter }}"><i class="fa fa-twitter"></i></a>
                            <a href="{{ settings.linkedin }}"><i class="fa fa-linkedin"></i></a>
                            <a href="{{ settings.pintrest }}"><i class="fa fa-pinterest-p"></i></a>
                        </div>
                        <div class="header__top__right__auth">
                            {% if 'customer_id' in request.session %}
                            <div class="dropdown" style="position: relative; cursor: pointer;">
                                <button class="btn dropdown-toggle" type="button" id="dropdownMenuButton" data-bs-toggle="dropdown" aria-expanded="false">
                                    <i class="fa fa-user"></i>
                                    <span>{{ customer }}</span>
                                </button>
                                <ul class="dropdown-menu" aria-labelledby="dropdownMenuButton" style="min-width: 100%;">
                                    <li><a class="dropdown-item" href="{% url 'Profile' %}">Profile</a></li>
                                    <li><a class="dropdown-item" href="{% url 'Orders' %}">Orders</a></li>
                                    <li><a class="dropdown-item" href="#" onclick="document.getElementById('logout-form').submit(); return false;">Sign out</a></li>
                                </ul>
                            </div>
                            <form id="logout-form" action="{% url 'Logout' %}" method="post" style="display: none;">
                                {% csrf_token %}
                            </form>
                            {% else %}
                            <a href="{% url 'Login' %}"><i class="fa fa-user"></i> Login</a>
                            {% endif %}
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="container">
        <div class="row">
            <div class="col-lg-3">
                <div class="header__logo">
                    <a href="{% url "Index" %}"><img src="{{ settings.logo.url }}" alt=""></a>
                </div>
            </div>
            <div class="col-lg-6">
                <nav class="header__menu">
                    <ul>
                        <li class="{% if request.resolver_match.url_name == 'Index' %}active{% endif %}"><a href="{% url "Index" %}">Home</a></li>
                        <li class="{% if request.resolver_match.url_name == 'Shop' %}active{% endif %}"><a href="{% url "Shop" %}">Shop</a></li>
                        <li class="{% if request.resolver_match.url_name == 'Contact' %}active{% endif %}"><a href="{% url "Contact" %}">Contact</a></li>
                    </ul>
                </nav>
            </div>
            <div class="col-lg-3">
                <div class="header__cart">
                    <ul>
                        <li><a href="{% url "Wishlist" %}"><i class="fa fa-heart"></i> <span id="wishlist-count">{{ wishlist_count }}</span></a></li>
                        <li><a href="{% url "Cart" %}"><i class="fa fa-shopping-bag"></i> <span id="cart-count">{{ cart|length }}</span></a></li>
                    </ul>
                </div>
            </div>
        </div>
        <div class="humberger__open">
            <i class="fa fa-bars"></i>
        </div>
    </div>
</header>
<!-- Header Section End -->

<!-- Hero Section Begin -->
<section class="hero {% if request.resolver_match.url_name != 'Index' %}hero-normal{% endif %}">
    <div class="container">
        <div class="row">
            <div class="col-lg-3">
                <div class="hero__categories">
                    <div class="hero__categories__all">
                        <i class="fa fa-bars"></i>
                        <span>All Categories</span>
                    </div>
                    <ul>
                        {% for category in categories %}
                        <li><a href="{% url 'Shop' %}?category={{ category.id }}">{{ category.name }}</a></li>
                        {% endfor %}
                    </ul>
                </div>
            </div>
            <div class="col-lg-9">
                <div class="hero__search">
                    <div class="hero__search__form">
                        <form method="POST" action="{% url "Search" %}">
                            {% csrf_token %}
                            <input type="text" placeholder="What do yo u need?" name="query">
                            <button type="submit" class="site-btn">SEARCH</button>
                        </form>
                    </div>
                    <div class="hero__search__phone">
                        <div class="hero__search__phone__icon">
                            <i class="fa fa-phone"></i>
                        </div>
                        <div class="hero__search__phone__text">
                            <h5>{{ settings.phone }}</h5>
                            <span>support 24/7 time</span>
                        </div>
                    </div>
                </div>
                {% if request.resolver_match.url_name == 'Index' %}
                <div class="hero__item set-bg" data-setbg="{{ settings.hero.url }}">
                    <div class="hero__text">
                        <a href="{% url "Shop" %}" class="primary-btn">SHOP NOW</a>
                    </div>
                </div>
                {% endif %}
            </div>
        </div>
    </div>
</section>
<!-- Hero Section End -->
 <script>
    document.addEventListener("DOMContentLoaded", function () {
        const dropdownToggles = document.querySelectorAll('div[style="position: relative; cursor: pointer;"]');
    
        dropdownToggles.forEach(dropdownToggle => {
            const dropdownMenu = dropdownToggle.querySelector('ul');
    
            dropdownToggle.addEventListener('click', function (event) {
                // Close all dropdowns first
                document.querySelectorAll('div[style="position: relative; cursor: pointer;"] ul').forEach(menu => {
                    if (menu !== dropdownMenu) {
                        menu.style.display = 'none';
                    }
                });
    
                // Toggle current dropdown
                dropdownMenu.style.display = (dropdownMenu.style.display === 'none' || dropdownMenu.style.display === '') ? 'block' : 'none';
    
                // Prevent event from propagating to document click listener
                event.stopPropagation();
            });
        });
    
        // Close dropdowns when clicking outside
        document.addEventListener('click', function () {
            document.querySelectorAll('div[style="position: relative; cursor: pointer;"] ul').forEach(menu => {
                menu.style.display = 'none';
            });
        });
    });      
 </script>